/////////////////////////////////////////////////////////////////////////////////////////
// Server for CrossZero
// Created by GbaLog
// Link on github.com: https://github.com/GbaLog
/////////////////////////////////////////////////////////////////////////////////////////
#ifndef SERVER_HPP
#define SERVER_HPP
/////////////////////////////////////////////////////////////////////////////////////////
#include <SFML/Network.hpp>
#include <utility>
#include <vector>
/////////////////////////////////////////////////////////////////////////////////////////
class Game;
/////////////////////////////////////////////////////////////////////////////////////////
class Server
{
public:
    Server( const unsigned short port );
    
    void run();
private:
    std::vector<Game> games;
    unsigned maxGames;
    sf::TcpListener listener;
    unsigned short port;
};
/////////////////////////////////////////////////////////////////////////////////////////
class Game
{
public:
    void setClients( sf::TcpSocket* firstPlayer, sf::TcpSocket* secondPlayer );
    
    void run();
private:
    sf::SocketSelector selector;
    sf::TcpSocket* firstPlayer;
    sf::TcpSocket* secondPlayer;
    bool firstPlayerWalking;
    bool endOfGame;
    char data[128];
};
/////////////////////////////////////////////////////////////////////////////////////////
#endif //SERVER_HPP
/////////////////////////////////////////////////////////////////////////////////////////